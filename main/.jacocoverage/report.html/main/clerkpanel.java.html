<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>clerkpanel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;main&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">main</a> &gt; <span class="el_source">clerkpanel.java</span></div><h1>clerkpanel.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package main;

import com.sun.org.apache.xalan.internal.xsltc.runtime.BasisLibrary;
import db.*;
import dbfunctions.*;
import dbfunctions.Bookf;
import feature.*;
import java.awt.GridLayout;
import java.awt.print.PrinterException;
import java.util.*;
import javax.swing.*;
import javax.swing.table.TableModel;

/**
 *
 * @author sumit
 */
public class clerkpanel extends javax.swing.JPanel {

<span class="nc" id="L26">    public static int i=0;</span>
<span class="nc" id="L27">    clerkpanel pan = this;</span>
<span class="nc" id="L28">    List&lt;Sales&gt; saleslist = new LinkedList&lt;Sales&gt;();</span>
    /**
     * Creates new form clerkpanel
     */
<span class="nc" id="L32">    public clerkpanel() {</span>
<span class="nc" id="L33">        initComponents();</span>
<span class="nc" id="L34">        receipttable.setRowHeight(30);</span>
<span class="nc" id="L35">    }</span>

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
    private void initComponents() {

<span class="nc" id="L46">        isbn = new javax.swing.JTextField();</span>
<span class="nc" id="L47">        jButton1 = new javax.swing.JButton();</span>
<span class="nc" id="L48">        jLabel1 = new javax.swing.JLabel();</span>
<span class="nc" id="L49">        jScrollPane1 = new javax.swing.JScrollPane();</span>
<span class="nc" id="L50">        receipttable = new javax.swing.JTable();</span>
<span class="nc" id="L51">        jButton2 = new javax.swing.JButton();</span>
<span class="nc" id="L52">        jLabel2 = new javax.swing.JLabel();</span>
<span class="nc" id="L53">        reserved = new javax.swing.JButton();</span>

<span class="nc" id="L55">        setBackground(new java.awt.Color(255, 255, 255));</span>

<span class="nc" id="L57">        jButton1.setText(&quot;SHOW DETAILS&quot;);</span>
<span class="nc" id="L58">        jButton1.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L60">                jButton1ActionPerformed(evt);</span>
<span class="nc" id="L61">            }</span>
        });

<span class="nc" id="L64">        jLabel1.setText(&quot;ENTER ISBN FOR BOOK DETAILS :&quot;);</span>

<span class="nc" id="L66">        receipttable.setModel(new javax.swing.table.DefaultTableModel(</span>
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                &quot;BOOK NAME&quot;, &quot;COPIES&quot;, &quot;PRICE&quot;
            }
<span class="nc" id="L122">        ) {</span>
<span class="nc" id="L123">            Class[] types = new Class [] {</span>
                java.lang.String.class, java.lang.Integer.class, java.lang.Float.class
            };
<span class="nc" id="L126">            boolean[] canEdit = new boolean [] {</span>
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
<span class="nc" id="L131">                return types [columnIndex];</span>
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
<span class="nc" id="L135">                return canEdit [columnIndex];</span>
            }
        });
<span class="nc" id="L138">        jScrollPane1.setViewportView(receipttable);</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (receipttable.getColumnModel().getColumnCount() &gt; 0) {</span>
<span class="nc" id="L140">            receipttable.getColumnModel().getColumn(1).setMinWidth(100);</span>
<span class="nc" id="L141">            receipttable.getColumnModel().getColumn(1).setPreferredWidth(100);</span>
<span class="nc" id="L142">            receipttable.getColumnModel().getColumn(1).setMaxWidth(200);</span>
<span class="nc" id="L143">            receipttable.getColumnModel().getColumn(2).setMinWidth(100);</span>
<span class="nc" id="L144">            receipttable.getColumnModel().getColumn(2).setPreferredWidth(100);</span>
<span class="nc" id="L145">            receipttable.getColumnModel().getColumn(2).setMaxWidth(200);</span>
        }

<span class="nc" id="L148">        jButton2.setText(&quot;PRINT RECEIPT&quot;);</span>
<span class="nc" id="L149">        jButton2.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L151">                jButton2ActionPerformed(evt);</span>
<span class="nc" id="L152">            }</span>
        });

<span class="nc" id="L155">        jLabel2.setFont(new java.awt.Font(&quot;Tahoma&quot;, 1, 24)); // NOI18N</span>
<span class="nc" id="L156">        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);</span>
<span class="nc" id="L157">        jLabel2.setText(&quot;CUSTOMER RECEIPT&quot;);</span>

<span class="nc" id="L159">        reserved.setText(&quot;RESERVED BOOKS&quot;);</span>
<span class="nc" id="L160">        reserved.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L162">                reservedActionPerformed(evt);</span>
<span class="nc" id="L163">            }</span>
        });

<span class="nc" id="L166">        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);</span>
<span class="nc" id="L167">        this.setLayout(layout);</span>
<span class="nc" id="L168">        layout.setHorizontalGroup(</span>
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(30, 30, 30)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(isbn, javax.swing.GroupLayout.PREFERRED_SIZE, 331, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(27, 27, 27)
                        .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 139, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(reserved, javax.swing.GroupLayout.PREFERRED_SIZE, 174, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 10, Short.MAX_VALUE)))
                .addGap(30, 30, 30))
            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING)
        );
<span class="nc" id="L188">        layout.setVerticalGroup(</span>
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(isbn, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(reserved, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(26, 26, 26)
                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(13, 13, 13)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 469, Short.MAX_VALUE))
        );
<span class="nc" id="L203">    }// &lt;/editor-fold&gt;//GEN-END:initComponents</span>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
<span class="nc bnc" id="L207" title="All 4 branches missed.">        if(&quot;&quot;.equals(isbn.getText()) || !Bookf.checkISBN(isbn.getText()))</span>
<span class="nc" id="L208">            JOptionPane.showMessageDialog(jButton1, &quot;INVALID ISBN.&quot;);</span>
        else
        {
<span class="nc" id="L211">            Book  b = Library.getBookByIsbn(isbn.getText());</span>

<span class="nc bnc" id="L213" title="All 2 branches missed.">            if(b==null)</span>
<span class="nc" id="L214">                JOptionPane.showMessageDialog(jButton1, &quot;BOOKSHOP DO NOT HAVE ANY BOOK BY THIS ISBN.&quot;);</span>
            else
            {
<span class="nc" id="L217">                sellbookdetails sell = new sellbookdetails(new javax.swing.JFrame(), true,b,pan);</span>
<span class="nc" id="L218">                sell.setVisible(true);</span>
            }
        }
<span class="nc" id="L221">    }//GEN-LAST:event_jButton1ActionPerformed</span>

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        try {
            // TODO add your handling code here:
<span class="nc bnc" id="L226" title="All 2 branches missed.">            if(receipttable.print())</span>
            {
<span class="nc" id="L228">                Library.sellBooks(saleslist);</span>
<span class="nc" id="L229">                JOptionPane.showMessageDialog(this, &quot;Transaction Complete&quot;);</span>
            }
            
<span class="nc" id="L232">        }catch(Exception e){</span>
<span class="nc" id="L233">            e.printStackTrace();</span>
<span class="nc" id="L234">        }</span>

<span class="nc" id="L236">    }//GEN-LAST:event_jButton2ActionPerformed</span>

    private void reservedActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_reservedActionPerformed
        // TODO add your handling code here
<span class="nc" id="L240">        List&lt;Reserves&gt; reserveses = Library.getCustomerReservedBooks();</span>
<span class="nc" id="L241">        JPanel jPanel = new JPanel();</span>
<span class="nc" id="L242">        jPanel.setVisible(true);</span>
<span class="nc" id="L243">        jPanel.setLayout(new GridLayout(0, 1));</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">        for(Reserves r:reserveses)</span>
        {
<span class="nc" id="L246">            ReservedBooks rb = new ReservedBooks(r,pan);</span>
<span class="nc" id="L247">            jPanel.add(rb);</span>
<span class="nc" id="L248">        }</span>
<span class="nc" id="L249">        home.h.setscrollpanebooks(jPanel);</span>
<span class="nc" id="L250">    }//GEN-LAST:event_reservedActionPerformed</span>

    public void addtablerow(Book b,int copies)
    {
<span class="nc" id="L254">        int count=0;</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">        if(saleslist.contains(b))</span>
<span class="nc bnc" id="L256" title="All 2 branches missed.">        for (Sales sales : saleslist) {</span>
<span class="nc" id="L257">            Book x=sales.getBook();</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">            if(x==b)</span>
            {
<span class="nc" id="L260">                TableModel model = receipttable.getModel();</span>
<span class="nc" id="L261">                model.setValueAt(b.getTitle(),count, 0);</span>
<span class="nc" id="L262">                model.setValueAt(copies, count, 1);</span>
<span class="nc" id="L263">                model.setValueAt(b.getSellprice()*copies, count, 2);</span>
<span class="nc" id="L264">                sales.setCopies(copies);</span>
<span class="nc" id="L265">                return;</span>
            }
<span class="nc" id="L267">            count++;</span>
<span class="nc" id="L268">        }</span>
<span class="nc" id="L269">        System.out.println(&quot;i=&quot;+i);</span>
<span class="nc" id="L270">        System.out.println(b);</span>
        
<span class="nc" id="L272">        TableModel model = receipttable.getModel();</span>
<span class="nc" id="L273">        model.setValueAt(b.getTitle(),i, 0);</span>
<span class="nc" id="L274">        model.setValueAt(copies, i, 1);</span>
<span class="nc" id="L275">        model.setValueAt(b.getSellprice()*copies, i, 2);</span>
        
<span class="nc" id="L277">        Sales obj = new Sales();</span>
<span class="nc" id="L278">        obj.setBook(b);</span>
<span class="nc" id="L279">        obj.setCopies(copies);</span>
        
<span class="nc" id="L281">        saleslist.add(obj);</span>
<span class="nc" id="L282">        i++;</span>
<span class="nc" id="L283">    }</span>
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField isbn;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable receipttable;
    private javax.swing.JButton reserved;
    // End of variables declaration//GEN-END:variables
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span></div></body></html>